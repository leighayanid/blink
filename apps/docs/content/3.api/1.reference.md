---
title: Type Reference
description: Complete API reference for Blink's shared types
---

# API Reference

Complete reference for all shared types in the `@blink/types` package.

## Installation

Import types from the shared package:

```typescript
import type { Device, Transfer, FileMetadata } from '@blink/types'
```

## Core Types

### Device

Represents a device on the local network.

```typescript
interface Device {
  id: string              // Unique device identifier
  name: string            // Device name (user-defined or auto-generated)
  platform: string        // Operating system/platform
  ip?: string            // Device IP address (optional)
  timestamp: number       // Last seen timestamp
  peerId?: string        // PeerJS connection ID (optional)
}
```

#### Usage Example

```typescript
const myDevice: Device = {
  id: 'device-123',
  name: 'MacBook Pro',
  platform: 'macOS',
  ip: '192.168.1.100',
  timestamp: Date.now(),
  peerId: 'peer-abc-123'
}
```

### Transfer

Tracks the state of a file transfer between devices.

```typescript
interface Transfer {
  id: string                    // Unique transfer identifier
  fileName: string              // Name of the file being transferred
  fileSize: number             // Total file size in bytes
  progress: number             // Transfer progress (0-100)
  status: TransferStatus       // Current transfer status
  speed?: number               // Transfer speed in bytes/sec (optional)
  fromDevice?: string          // Source device ID (optional)
  toDevice?: string            // Target device ID (optional)
  startTime?: number           // Transfer start timestamp (optional)
  endTime?: number             // Transfer end timestamp (optional)
}

type TransferStatus = 'pending' | 'sending' | 'receiving' | 'completed' | 'failed'
```

#### Status Lifecycle

```
pending → sending/receiving → completed
                           ↘ failed
```

#### Usage Example

```typescript
const transfer: Transfer = {
  id: 'transfer-456',
  fileName: 'document.pdf',
  fileSize: 2048000,
  progress: 45,
  status: 'sending',
  speed: 512000,
  fromDevice: 'device-123',
  toDevice: 'device-456',
  startTime: Date.now()
}

// Calculate estimated time remaining
const bytesRemaining = transfer.fileSize * (1 - transfer.progress / 100)
const secondsRemaining = transfer.speed ? bytesRemaining / transfer.speed : 0
```

### FileMetadata

Contains metadata about a file being transferred.

```typescript
interface FileMetadata {
  name: string           // File name
  size: number          // File size in bytes
  type: string          // MIME type
  lastModified: number  // Last modified timestamp
}
```

#### Usage Example

```typescript
// Extract metadata from a File object
const file: File = /* ... */

const metadata: FileMetadata = {
  name: file.name,
  size: file.size,
  type: file.type,
  lastModified: file.lastModified
}
```

### ChunkData

Represents a chunk of data during file transfer.

```typescript
interface ChunkData {
  type: ChunkType              // Type of chunk message
  transferId?: string          // Associated transfer ID (optional)
  data?: ArrayBuffer          // Chunk binary data (optional)
  metadata?: FileMetadata     // File metadata (optional)
  chunkIndex?: number         // Current chunk number (optional)
  totalChunks?: number        // Total number of chunks (optional)
}

type ChunkType = 'file-meta' | 'file-chunk' | 'file-complete'
```

#### Chunk Types

- **`file-meta`**: Initial message with file metadata
- **`file-chunk`**: Individual data chunk
- **`file-complete`**: Final message indicating transfer completion

#### Usage Example

```typescript
// Sending file metadata
const metaChunk: ChunkData = {
  type: 'file-meta',
  transferId: 'transfer-456',
  metadata: {
    name: 'image.png',
    size: 1024000,
    type: 'image/png',
    lastModified: Date.now()
  },
  totalChunks: 63
}

// Sending a data chunk
const dataChunk: ChunkData = {
  type: 'file-chunk',
  transferId: 'transfer-456',
  data: arrayBuffer,
  chunkIndex: 5,
  totalChunks: 63
}

// Sending completion message
const completeChunk: ChunkData = {
  type: 'file-complete',
  transferId: 'transfer-456'
}
```

### SignalingMessage

WebSocket messages for peer connection signaling.

```typescript
interface SignalingMessage {
  type: SignalingType      // Message type
  deviceInfo?: Device      // Device information (optional)
  peerId?: string          // Peer ID (optional)
  signal?: any            // WebRTC signal data (optional)
  targetPeer?: string     // Target peer ID (optional)
  fromPeer?: string       // Source peer ID (optional)
}

type SignalingType =
  | 'announce'
  | 'signal'
  | 'peer-joined'
  | 'peer-left'
  | 'offer'
  | 'answer'
  | 'ice-candidate'
  | 'init'
```

#### Message Types

| Type | Purpose | Required Fields |
|------|---------|----------------|
| `announce` | Announce device presence | `deviceInfo` |
| `signal` | WebRTC signaling | `signal`, `targetPeer` |
| `peer-joined` | Notify new peer joined | `deviceInfo` |
| `peer-left` | Notify peer disconnected | `peerId` |
| `offer` | WebRTC connection offer | `signal`, `targetPeer` |
| `answer` | WebRTC connection answer | `signal`, `targetPeer` |
| `ice-candidate` | ICE candidate exchange | `signal`, `targetPeer` |
| `init` | Initialize connection | `peerId` |

#### Usage Example

```typescript
// Announce device on network
const announce: SignalingMessage = {
  type: 'announce',
  deviceInfo: {
    id: 'device-123',
    name: 'iPhone',
    platform: 'iOS',
    timestamp: Date.now()
  }
}

// Send WebRTC offer
const offer: SignalingMessage = {
  type: 'offer',
  fromPeer: 'peer-123',
  targetPeer: 'peer-456',
  signal: rtcSessionDescription
}
```

## Shared Configuration

### Tailwind Config

Access the shared Tailwind configuration:

```typescript
// In your tailwind.config.ts
import baseConfig from '@blink/config/tailwind'

export default {
  ...baseConfig,
  // Your overrides
}
```

### TypeScript Config

Extend the base TypeScript configuration:

```json
{
  "extends": "@blink/config/typescript/tsconfig.base.json",
  "compilerOptions": {
    // Your overrides
  }
}
```

## Type Guards

Useful type guards for runtime type checking:

```typescript
// Check if a transfer is active
function isActiveTransfer(transfer: Transfer): boolean {
  return ['pending', 'sending', 'receiving'].includes(transfer.status)
}

// Check if a device is online (seen in last 30 seconds)
function isDeviceOnline(device: Device): boolean {
  const thirtySecondsAgo = Date.now() - 30000
  return device.timestamp > thirtySecondsAgo
}

// Validate chunk data type
function isFileMetaChunk(chunk: ChunkData): chunk is ChunkData & { metadata: FileMetadata } {
  return chunk.type === 'file-meta' && chunk.metadata !== undefined
}
```

## Utility Types

Helper types for working with Blink types:

```typescript
// Partial device for updates
type DeviceUpdate = Partial<Omit<Device, 'id'>>

// Transfer without computed fields
type TransferInput = Omit<Transfer, 'progress' | 'speed' | 'endTime'>

// Completed transfer
type CompletedTransfer = Required<Transfer> & { status: 'completed' }
```

## Best Practices

### Use type imports

Always import types with the `type` keyword:

```typescript
// ✅ Good
import type { Device, Transfer } from '@blink/types'

// ❌ Avoid
import { Device, Transfer } from '@blink/types'
```

### Validate runtime data

Types are compile-time only. Validate data at runtime:

```typescript
function validateDevice(data: unknown): Device {
  if (
    typeof data === 'object' &&
    data !== null &&
    'id' in data &&
    'name' in data &&
    'platform' in data
  ) {
    return data as Device
  }
  throw new Error('Invalid device data')
}
```

### Handle optional fields

Always check optional fields before use:

```typescript
function formatDeviceIP(device: Device): string {
  return device.ip ?? 'Unknown IP'
}

function calculateTransferTime(transfer: Transfer): number | null {
  if (transfer.startTime && transfer.endTime) {
    return transfer.endTime - transfer.startTime
  }
  return null
}
```

## Next Steps

- [Learn about file transfers](/guide/file-transfers)
- [View deployment guide](/guide/deployment)
- [Contribute on GitHub](https://github.com/leighdinaya/local-share-app)
